<app-nav></app-nav>
<div class="container">
  <div class="row" *ngIf="olderVersion">
    <div class="col-md-4"></div>
    <div class="col-md-4">
      <button type="submit" class="btn btn-primary btn-md btn-block" (click)="exportModel()">
        <i class="fas fa-file-export fa-lg fa-fw" aria-hidden="true"></i>
        Export
      </button>
    </div>
    <div class="col-md-4"></div>
  </div>
  <div class="row" *ngIf="!olderVersion">
    <div class="col-md-3">
      <div class="wrapper">
        <h3>
          <span class="badge badge-info">
            {{modelName}}
          </span>
        </h3>
      </div>
    </div>
    <div class="col-md-3">
      <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle btn-md btn-block" type="button" id="dropdownMenuButton"
          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-save fa-lg fa-fw" aria-hidden="true" (click)="save()"></i>
          Save
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" data-toggle="modal" data-target="#renameFolder" (click)="saveCurrent()">
            <i class="fas fa-save fa-lg fa-fw" aria-hidden="true"></i>
            Save in the current version
          </a>
          <a class="dropdown-item" data-toggle="modal" data-target="#deleteFolder" data-dismiss="modal" data-toggle="modal"
            data-target="#newVersion">
            <i class="fas fa-code-branch fa-lg fa-fw" aria-hidden="true"></i>
            Save as a new version
          </a>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <button type="submit" class="btn btn-primary btn-md btn-block" (click)="exportModel()">
        <i class="fas fa-file-export fa-lg fa-fw" aria-hidden="true"></i>
        Export
      </button>
    </div>
    <div class="col-md-3">
      <button type="submit" class="btn btn-primary btn-md btn-block" (click)="verifyValidity()">
        <i class="fas fa-file-export fa-lg fa-fw" aria-hidden="true"></i>
        Verify
      </button>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-4"></div>
  <div class="col-md-4">
    <div *ngIf="saveAlert" class="alert alert-success" role="alert">
      {{saveAlertMessage}}
    </div>
    <div *ngIf="alertExport" class="alert alert-warning" role="alert">
      {{checkExportMessage}}
    </div>
  </div>
  <div class="col-md-4"></div>
</div>
<div class="row">
  <div class="col-md-12">
    <div class="modeler">
      <div id="canvas"></div>
      <div id="properties"></div>
    </div>
  </div>
</div>
<!--  Modal for new version.  -->
<div class="modal fade" id="newVersion" tabindex="-1" role="dialog" aria-labelledby="newVersion" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newVersionTitle">Add new version</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <label>Write a small description about the new version:</label>
        <div class="inputWithIcon">
          <input type="text" name="newVersion" class="form-control" placeholder="Write a description..." title="New version"
            #versionDescription>
          <i class="fas fa-edit fa-lg fa-fw"></i>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-success" data-dismiss="modal" (click)="saveNew(versionDescription.value)">Add</button>
      </div>
    </div>
  </div>
</div>